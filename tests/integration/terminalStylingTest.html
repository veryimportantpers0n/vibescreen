<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal Styling and Responsive Design Test</title>
    <style>
        /* Import terminal styles */
        @import url('../../styles/terminal-interface.module.css');
        
        /* Test page specific styles */
        body {
            margin: 0;
            padding: 20px;
            background: #000;
            color: #00FF00;
            font-family: 'Courier New', monospace;
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #00FF00;
            border-radius: 4px;
            background: rgba(0, 255, 0, 0.05);
        }
        
        .test-section h2 {
            margin-top: 0;
            color: #00FF00;
            text-shadow: 0 0 5px #00FF00;
        }
        
        .viewport-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .viewport-btn {
            padding: 8px 16px;
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00FF00;
            color: #00FF00;
            cursor: pointer;
            border-radius: 4px;
            font-family: inherit;
            transition: all 0.3s ease;
        }
        
        .viewport-btn:hover {
            background: rgba(0, 255, 0, 0.2);
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
        }
        
        .viewport-btn.active {
            background: rgba(0, 255, 0, 0.3);
            font-weight: bold;
        }
        
        .test-results {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #008F11;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .test-results h3 {
            margin-top: 0;
            color: #00FF00;
        }
        
        .result-item {
            margin: 5px 0;
            padding: 5px;
            border-radius: 2px;
        }
        
        .result-item.success {
            color: #00FF00;
            background: rgba(0, 255, 0, 0.1);
        }
        
        .result-item.error {
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
        }
        
        .result-item.info {
            color: #ffa500;
            background: rgba(255, 165, 0, 0.1);
        }
        
        .accessibility-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .accessibility-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .accessibility-toggle input[type="checkbox"] {
            accent-color: #00FF00;
        }
        
        .accessibility-toggle label {
            color: #00FF00;
            cursor: pointer;
        }
        
        .current-viewport {
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(0, 255, 0, 0.1);
            border-radius: 4px;
            font-weight: bold;
        }
        
        /* Terminal styling test elements */
        .terminal-demo {
            position: relative;
            height: 300px;
            border: 1px dashed #008F11;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.3);
        }
        
        /* Override module CSS for testing */
        .terminalTrigger {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 40px;
            height: 30px;
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid #00FF00;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 199;
            transition: all 0.3s ease;
            opacity: 0.7;
        }
        
        .terminalTrigger:hover {
            opacity: 1;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
            border-color: #00FF00;
        }
        
        .triggerIcon {
            color: #00FF00;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            font-weight: bold;
        }
        
        .terminalContainer {
            position: fixed;
            bottom: 60px;
            left: 20px;
            width: 400px;
            max-height: 200px;
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid #00FF00;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #00FF00;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
            z-index: 200;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
            pointer-events: none;
            backdrop-filter: blur(2px);
        }
        
        .terminalContainer.visible {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }
        
        .terminalContainer::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, rgba(0, 255, 0, 0.3), transparent, rgba(0, 255, 0, 0.3));
            border-radius: 6px;
            z-index: -1;
            opacity: 0.5;
            animation: phosphorGlow 2s ease-in-out infinite alternate;
        }
        
        @keyframes phosphorGlow {
            0% { opacity: 0.3; }
            100% { opacity: 0.6; }
        }
        
        .terminalContent {
            padding: 12px;
        }
        
        .terminalInput {
            background: transparent;
            border: none;
            color: #00FF00;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            width: 100%;
            outline: none;
        }
        
        .cursor {
            display: inline-block;
            width: 8px;
            height: 14px;
            background: #00FF00;
            margin-left: 2px;
            animation: cursor-blink 1s infinite;
            box-shadow: 0 0 3px rgba(0, 255, 0, 0.3);
        }
        
        @keyframes cursor-blink {
            0%, 45% {
                opacity: 1;
                background: #00FF00;
                box-shadow: 0 0 5px rgba(0, 255, 0, 0.3);
            }
            50%, 95% {
                opacity: 0.3;
                background: #008F11;
                box-shadow: none;
            }
            100% {
                opacity: 1;
                background: #00FF00;
                box-shadow: 0 0 5px rgba(0, 255, 0, 0.3);
            }
        }
        
        /* Responsive design test styles */
        @media (max-width: 768px) {
            .terminalTrigger {
                bottom: 15px;
                left: 15px;
                width: 50px;
                height: 35px;
            }
            
            .terminalContainer {
                bottom: 55px;
                left: 15px;
                right: 15px;
                width: auto;
                max-width: 350px;
                font-size: 11px;
            }
        }
        
        @media (max-width: 480px) {
            .terminalContainer {
                max-width: 300px;
                font-size: 10px;
            }
        }
        
        /* High contrast mode */
        .terminalContainer.highContrast {
            border-width: 3px;
            background: #000000;
            box-shadow: 0 0 30px #00FF00;
        }
        
        /* Reduced motion mode */
        .terminalContainer.reducedMotion {
            transition: opacity 0.1s ease;
            transform: none;
        }
        
        .terminalContainer.reducedMotion.visible {
            transform: none;
        }
        
        .terminalContainer.reducedMotion .cursor {
            animation: none;
            opacity: 1;
            box-shadow: none;
        }
        
        .terminalContainer.reducedMotion::before {
            animation: none;
            opacity: 0.4;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Terminal Styling and Responsive Design Test</h1>
        
        <!-- Viewport Controls -->
        <div class="test-section">
            <h2>Viewport Testing</h2>
            <div class="current-viewport" id="currentViewport">
                Current Viewport: <span id="viewportSize">Loading...</span>
            </div>
            <div class="viewport-controls">
                <button class="viewport-btn" onclick="setViewport(1920, 1080, 'Desktop Large')">Desktop Large (1920x1080)</button>
                <button class="viewport-btn" onclick="setViewport(1366, 768, 'Desktop Standard')">Desktop Standard (1366x768)</button>
                <button class="viewport-btn" onclick="setViewport(768, 1024, 'Tablet')">Tablet (768x1024)</button>
                <button class="viewport-btn" onclick="setViewport(480, 800, 'Mobile Large')">Mobile Large (480x800)</button>
                <button class="viewport-btn" onclick="setViewport(320, 568, 'Mobile Small')">Mobile Small (320x568)</button>
                <button class="viewport-btn" onclick="resetViewport()">Reset to Actual</button>
            </div>
        </div>
        
        <!-- Accessibility Controls -->
        <div class="test-section">
            <h2>Accessibility Testing</h2>
            <div class="accessibility-controls">
                <div class="accessibility-toggle">
                    <input type="checkbox" id="highContrastToggle" onchange="toggleHighContrast()">
                    <label for="highContrastToggle">High Contrast Mode</label>
                </div>
                <div class="accessibility-toggle">
                    <input type="checkbox" id="reducedMotionToggle" onchange="toggleReducedMotion()">
                    <label for="reducedMotionToggle">Reduced Motion Mode</label>
                </div>
                <div class="accessibility-toggle">
                    <input type="checkbox" id="screenReaderToggle" onchange="toggleScreenReader()">
                    <label for="screenReaderToggle">Screen Reader Mode</label>
                </div>
            </div>
        </div>
        
        <!-- Terminal Demo Area -->
        <div class="test-section">
            <h2>Terminal Interface Demo</h2>
            <div class="terminal-demo">
                <!-- Terminal Trigger -->
                <div class="terminalTrigger" id="terminalTrigger" onclick="toggleTerminal()">
                    <div class="triggerIcon">></div>
                </div>
                
                <!-- Terminal Container -->
                <div class="terminalContainer" id="terminalContainer">
                    <div class="terminalContent">
                        <div>Welcome to VibeScreen Terminal</div>
                        <div>Type !help for available commands</div>
                        <div style="margin-top: 10px;">
                            > <input type="text" class="terminalInput" placeholder="Enter command..." style="width: 200px;">
                            <span class="cursor"></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <button onclick="runStylingTests()" style="padding: 10px 20px; background: rgba(0, 255, 0, 0.1); border: 1px solid #00FF00; color: #00FF00; border-radius: 4px; cursor: pointer; margin-top: 10px;">
                Run Styling Tests
            </button>
        </div>
        
        <!-- Test Results -->
        <div class="test-section">
            <h2>Test Results</h2>
            <div class="test-results" id="testResults">
                <h3>Click "Run Styling Tests" to begin validation</h3>
                <p>This will test:</p>
                <ul>
                    <li>Matrix green color scheme and phosphor glow effects</li>
                    <li>Responsive design across different screen sizes</li>
                    <li>Terminal trigger area styling and hover states</li>
                    <li>Accessibility enhancements (high contrast, reduced motion)</li>
                    <li>Animation effects and cursor styling</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        let currentViewportName = 'Actual';
        let terminalVisible = false;
        
        // Update viewport display
        function updateViewportDisplay() {
            const viewportSize = document.getElementById('viewportSize');
            viewportSize.textContent = `${currentViewportName} (${window.innerWidth}x${window.innerHeight})`;
        }
        
        // Set viewport size
        function setViewport(width, height, name) {
            if (window.resizeTo) {
                window.resizeTo(width, height);
            } else {
                // Simulate viewport change for testing
                document.body.style.width = width + 'px';
                document.body.style.height = height + 'px';
                document.body.style.overflow = 'hidden';
            }
            
            currentViewportName = name;
            updateViewportDisplay();
            
            // Update active button
            document.querySelectorAll('.viewport-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Trigger resize event
            window.dispatchEvent(new Event('resize'));
        }
        
        // Reset viewport
        function resetViewport() {
            document.body.style.width = '';
            document.body.style.height = '';
            document.body.style.overflow = '';
            currentViewportName = 'Actual';
            updateViewportDisplay();
            
            document.querySelectorAll('.viewport-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }
        
        // Toggle terminal visibility
        function toggleTerminal() {
            const terminal = document.getElementById('terminalContainer');
            terminalVisible = !terminalVisible;
            
            if (terminalVisible) {
                terminal.classList.add('visible');
            } else {
                terminal.classList.remove('visible');
            }
        }
        
        // Toggle high contrast mode
        function toggleHighContrast() {
            const terminal = document.getElementById('terminalContainer');
            const trigger = document.getElementById('terminalTrigger');
            const isEnabled = document.getElementById('highContrastToggle').checked;
            
            if (isEnabled) {
                terminal.classList.add('highContrast');
                trigger.classList.add('highContrast');
            } else {
                terminal.classList.remove('highContrast');
                trigger.classList.remove('highContrast');
            }
        }
        
        // Toggle reduced motion mode
        function toggleReducedMotion() {
            const terminal = document.getElementById('terminalContainer');
            const isEnabled = document.getElementById('reducedMotionToggle').checked;
            
            if (isEnabled) {
                terminal.classList.add('reducedMotion');
            } else {
                terminal.classList.remove('reducedMotion');
            }
        }
        
        // Toggle screen reader mode
        function toggleScreenReader() {
            const terminal = document.getElementById('terminalContainer');
            const isEnabled = document.getElementById('screenReaderToggle').checked;
            
            terminal.setAttribute('data-screen-reader', isEnabled);
        }
        
        // Run comprehensive styling tests
        async function runStylingTests() {
            const resultsContainer = document.getElementById('testResults');
            resultsContainer.innerHTML = '<h3>Running Tests...</h3>';
            
            const results = [];
            const errors = [];
            
            // Test 1: Matrix Green Color Scheme
            try {
                const rootStyles = getComputedStyle(document.documentElement);
                const terminalContainer = document.getElementById('terminalContainer');
                const containerStyles = getComputedStyle(terminalContainer);
                
                // Check border color
                const borderColor = containerStyles.borderColor;
                if (borderColor.includes('0, 255, 0') || borderColor.includes('rgb(0, 255, 0)')) {
                    results.push('✓ Terminal container has matrix green border');
                } else {
                    errors.push(`✗ Terminal border color incorrect: ${borderColor}`);
                }
                
                // Check box shadow (phosphor glow)
                const boxShadow = containerStyles.boxShadow;
                if (boxShadow && boxShadow !== 'none') {
                    results.push('✓ Terminal container has phosphor glow effect');
                } else {
                    errors.push('✗ Terminal container missing phosphor glow effect');
                }
                
            } catch (error) {
                errors.push(`✗ Matrix styling test error: ${error.message}`);
            }
            
            // Test 2: Responsive Design
            const viewports = [
                { width: 768, name: 'Tablet' },
                { width: 480, name: 'Mobile Large' },
                { width: 320, name: 'Mobile Small' }
            ];
            
            for (const viewport of viewports) {
                try {
                    // Simulate viewport
                    document.body.style.width = viewport.width + 'px';
                    
                    const terminalContainer = document.getElementById('terminalContainer');
                    const containerStyles = getComputedStyle(terminalContainer);
                    const containerWidth = parseInt(containerStyles.width) || parseInt(containerStyles.maxWidth);
                    
                    if (viewport.width <= 768) {
                        if (containerWidth <= viewport.width - 30) {
                            results.push(`✓ ${viewport.name}: Terminal width adapts to screen`);
                        } else {
                            errors.push(`✗ ${viewport.name}: Terminal width too large`);
                        }
                    }
                    
                } catch (error) {
                    errors.push(`✗ ${viewport.name} responsive test error: ${error.message}`);
                }
            }
            
            // Reset viewport
            document.body.style.width = '';
            
            // Test 3: Trigger Area Styling
            try {
                const terminalTrigger = document.getElementById('terminalTrigger');
                const triggerStyles = getComputedStyle(terminalTrigger);
                
                const position = triggerStyles.position;
                const cursor = triggerStyles.cursor;
                
                if (position === 'fixed') {
                    results.push('✓ Trigger area properly positioned (fixed)');
                } else {
                    errors.push(`✗ Trigger positioning incorrect: ${position}`);
                }
                
                if (cursor === 'pointer') {
                    results.push('✓ Trigger area has pointer cursor');
                } else {
                    errors.push(`✗ Trigger cursor incorrect: ${cursor}`);
                }
                
            } catch (error) {
                errors.push(`✗ Trigger area test error: ${error.message}`);
            }
            
            // Test 4: Animation Effects
            try {
                const cursor = document.querySelector('.cursor');
                if (cursor) {
                    const cursorStyles = getComputedStyle(cursor);
                    const animation = cursorStyles.animation;
                    
                    if (animation && animation !== 'none') {
                        results.push('✓ Cursor has blinking animation');
                    } else {
                        errors.push('✗ Cursor missing blinking animation');
                    }
                } else {
                    errors.push('✗ Cursor element not found');
                }
                
            } catch (error) {
                errors.push(`✗ Animation test error: ${error.message}`);
            }
            
            // Test 5: Accessibility Features
            try {
                const terminal = document.getElementById('terminalContainer');
                
                // Test high contrast
                terminal.classList.add('highContrast');
                const highContrastStyles = getComputedStyle(terminal);
                const borderWidth = parseInt(highContrastStyles.borderWidth);
                
                if (borderWidth >= 3) {
                    results.push('✓ High contrast mode increases border width');
                } else {
                    errors.push(`✗ High contrast border width insufficient: ${borderWidth}px`);
                }
                
                terminal.classList.remove('highContrast');
                
                // Test reduced motion
                terminal.classList.add('reducedMotion');
                const reducedMotionStyles = getComputedStyle(terminal);
                const transition = reducedMotionStyles.transition;
                
                if (transition.includes('0.1s') || transition === 'none') {
                    results.push('✓ Reduced motion mode modifies animations');
                } else {
                    results.push('ℹ Reduced motion styling detected');
                }
                
                terminal.classList.remove('reducedMotion');
                
            } catch (error) {
                errors.push(`✗ Accessibility test error: ${error.message}`);
            }
            
            // Display results
            displayTestResults(results, errors);
        }
        
        // Display test results
        function displayTestResults(results, errors) {
            const resultsContainer = document.getElementById('testResults');
            const totalTests = results.length + errors.length;
            const successRate = totalTests > 0 ? ((results.length / totalTests) * 100).toFixed(1) : 0;
            
            let html = `
                <h3>Test Results Summary</h3>
                <p><strong>Total Tests:</strong> ${totalTests}</p>
                <p><strong>Passed:</strong> ${results.length}</p>
                <p><strong>Failed:</strong> ${errors.length}</p>
                <p><strong>Success Rate:</strong> ${successRate}%</p>
                <hr>
            `;
            
            if (results.length > 0) {
                html += '<h4>✅ Passed Tests:</h4>';
                results.forEach(result => {
                    html += `<div class="result-item success">${result}</div>`;
                });
            }
            
            if (errors.length > 0) {
                html += '<h4>❌ Failed Tests:</h4>';
                errors.forEach(error => {
                    html += `<div class="result-item error">${error}</div>`;
                });
            }
            
            if (totalTests === 0) {
                html += '<div class="result-item info">No tests were executed. Please check the test setup.</div>';
            }
            
            resultsContainer.innerHTML = html;
        }
        
        // Initialize page
        window.addEventListener('load', () => {
            updateViewportDisplay();
            
            // Show terminal by default for testing
            setTimeout(() => {
                toggleTerminal();
            }, 1000);
        });
        
        // Update viewport display on resize
        window.addEventListener('resize', updateViewportDisplay);
    </script>
</body>
</html>